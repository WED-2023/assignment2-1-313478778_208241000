"use strict";(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[24],{7998:(r,t,e)=>{e.d(t,{Z:()=>d});var o=function(){var r=this,t=r._self._c;return t("b-card",{staticClass:"custom-card"},[t("h1",{staticClass:"title mb-4"},[r._v("Login")]),t("b-form",{on:{submit:function(t){return t.preventDefault(),r.onLogin.apply(null,arguments)}}},[t("b-form-group",{attrs:{id:"input-group-Username","label-cols-sm":"4",label:"Username:","label-for":"username"}},[t("b-form-input",{attrs:{id:"username",type:"text",state:r.validateState("username")},model:{value:r.$v.form.username.$model,callback:function(t){r.$set(r.$v.form.username,"$model",t)},expression:"$v.form.username.$model"}}),t("b-form-invalid-feedback",[r._v(" Username is required ")])],1),t("b-form-group",{attrs:{id:"input-group-Password","label-cols-sm":"4",label:"Password:","label-for":"Password"}},[t("b-form-input",{attrs:{id:"password",type:"password",state:r.validateState("password")},model:{value:r.$v.form.password.$model,callback:function(t){r.$set(r.$v.form.password,"$model",t)},expression:"$v.form.password.$model"}}),t("b-form-invalid-feedback",[r._v(" Password is required ")])],1),t("b-button",{staticClass:"mx-auto w-100",staticStyle:{width:"100px"},attrs:{disabled:r.isSubmitting,type:"submit",variant:"primary"}},[r._v(" Login ")]),t("div",{staticClass:"mt-4"},[r._v(" Do not have an account yet? "),t("span",{staticClass:"register-prompt",on:{click:r.handleToggleForm}},[r._v("Register here ")])])],1),r.form.submitError?t("b-alert",{staticClass:"mt-4",attrs:{variant:"warning",dismissible:"",show:""}},[r._v(" Login failed: "+r._s(r.form.submitError)+" ")]):r._e()],1)},s=[],a=e(124),i=e(8534),n=(e(7658),e(8309),e(1539),e(379));const l={name:"LoginForm",props:{toggleForm:{type:Function}},data:function(){return{form:{username:"",password:"",submitError:void 0},isSubmitting:!1}},validations:{form:{username:{required:n.C1},password:{required:n.C1}}},methods:{validateState:function(r){var t=this.$v.form[r],e=t.$dirty,o=t.$error;return e?!o:null},Login:function(){var r=this;return(0,i.Z)((0,a.Z)().mark((function t(){var e,o,s;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.axios.post("".concat(r.$root.store.server_domain,"/auth/login"),{username:r.form.username,password:r.form.password},{withCredentials:!0});case 3:e=t.sent,e.data.success?(r.$root.store.login(r.form.username),r.$router.push("/")["catch"]((function(r){"NavigationDuplicated"!==r.name&&console.error(r)}))):r.form.submitError=e.data.message||"Login failed",t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r.form.submitError=(null===(o=t.t0.response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.message)||"An error occurred during login. Please try again.";case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},onLogin:function(){var r=this;this.form.submitError=void 0,this.$v.form.$touch(),this.$v.form.$anyError||(this.isSubmitting=!0,this.Login()["finally"]((function(){r.isSubmitting=!1})))},handleToggleForm:function(){var r=this.$route.path;"/"===r?this.toggleForm():"/login"===r&&this.$router.push("/register")}}},m=l;var u=e(1001),c=(0,u.Z)(m,o,s,!1,null,"f2857190",null);const d=c.exports},7017:(r,t,e)=>{e.r(t),e.d(t,{default:()=>f});var o=function(){var r=this,t=r._self._c;return t("b-container",[t("b-row",{staticClass:"text-center"},[t("b-col",{staticClass:"d-flex justify-content-center align-items-center"},[this.$root.store.username?t("b-col",[t("WelcomUser")],1):t("b-col",[r.showLoginForm?t("LoginForm",{attrs:{"toggle-form":r.toggleForm}}):t("RegisterForm",{attrs:{"toggle-form":r.toggleForm}})],1)],1),t("b-col",[t("RecipePreviewList",{attrs:{title:"Explore:"}})],1)],1)],1)},s=[],a=e(7998),i=e(4266),n=e(3656),l=e(2638);const m={components:{LoginForm:a.Z,RegisterForm:n.Z,RecipePreviewList:i.Z,WelcomUser:l.Z},data:function(){return{showLoginForm:!0}},methods:{toggleForm:function(){this.showLoginForm=!this.showLoginForm}}},u=m;var c=e(1001),d=(0,c.Z)(u,o,s,!1,null,"2aea4f3b",null);const f=d.exports}}]);
//# sourceMappingURL=24.94460f7f.js.map