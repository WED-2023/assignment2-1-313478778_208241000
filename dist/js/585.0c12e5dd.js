(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[585],{4266:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"recipe-preview-container"},[t("b-row",{staticClass:"d-flex align-items-center justify-content-between"},[t("b-col",[t("h3",[e._v(e._s(e.title))])]),t("b-col",{staticClass:"text-right"},["main"===e.parentPageName?t("div",[t("b-iconstack",{staticClass:"rotate-on-hover",attrs:{"font-scale":"2.8"},on:{click:e.refreshRecipes}},[t("b-icon",{attrs:{stacked:"",icon:"circle-fill",variant:"success"}}),t("b-icon",{attrs:{stacked:"",icon:"arrow-repeat",scale:"0.8",variant:"white"}})],1)],1):"favorites"===e.parentPageName||"private"===e.parentPageName?t("div",[t("b-icon",{staticClass:"mr-2",class:e.hasPreviousPage?"rotate-on-hover":"",staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left-circle-fill",variant:e.hasPreviousPage?"success":"secondary","font-scale":"2.8"},on:{click:e.previousPage}}),t("b-icon",{staticClass:"mr-2",class:e.hasNextPage?"rotate-on-hover":"",staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-right-circle-fill",variant:e.hasNextPage?"success":"secondary","font-scale":"2.8"},on:{click:e.nextPage}})],1):e._e()])],1),e._l(e.displayedRecipes,(function(r){return t("b-row",{key:r.id,staticClass:"mt-4"},[t("RecipePreview",{attrs:{recipe:r},on:{"favorite-toggled":e.handleFavoriteToggle}})],1)}))],2)},n=[];r(1703),r(6647);function s(e){throw new TypeError('"'+e+'" is read-only')}var i=r(124),c=r(8534),o=(r(1249),r(3210),r(7042),r(8309),r(4553),r(561),r(7658),r(4307)),l=r(9206);const u={name:"RecipePreviewList",components:{RecipePreview:o.Z},props:{title:{type:String,required:!0}},data:function(){return{recipes:[],displayedRecipes:[],currentPage:0,pageSize:3,parentPageName:""}},computed:{hasPreviousPage:function(){return this.currentPage>0},hasNextPage:function(){var e=this.recipes.length,t=Math.ceil(e/this.pageSize);return this.currentPage<t-1}},mounted:function(){this.determineParentPageName(),this.updateRecipesBackEnd()},methods:{transformIngredients:function(e){return e.split(",").map((function(e){return{original:e.trim(),name:e.trim(),amount:1,unit:""}}))},transformInstructions:function(e){return[{name:"",steps:[{number:1,step:e}]}]},transformPrivateRecipes:function(e){var t=this;return e.map((function(e){return{id:e.id,title:e.title,readyInMinutes:e.readyInMinutes,image:e.image,vegetarian:e.diet.vegetarian,vegan:e.diet.vegan,glutenFree:e.diet.glutenFree,extendedIngredients:t.transformIngredients(e.ingredients),analyzedInstructions:t.transformInstructions(e.summary),aggregateLikes:0,servings:1}}))},updateRecipesBackEnd:function(){var e=this;return(0,c.Z)((0,i.Z)().mark((function t(){var r,a,n,s,c;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"main"!==e.parentPageName){t.next=9;break}return r=3,t.next=5,e.axios.get("".concat(e.$root.store.server_domain,"/recipes/random"),{params:{number:r}},{withCredentials:!0});case 5:a=t.sent,e.recipes=a.data,t.next=25;break;case 9:if("favorites"!==e.parentPageName){t.next=16;break}return t.next=12,e.axios.get("".concat(e.$root.store.server_domain,"/user/favorites/show"),{withCredentials:!0});case 12:n=t.sent,e.recipes=n.data,t.next=25;break;case 16:if("private"!==e.parentPageName){t.next=23;break}return t.next=19,e.axios.get("".concat(e.$root.store.server_domain,"/user/PrivateRecipes"),{withCredentials:!0});case 19:s=t.sent,e.recipes=e.transformPrivateRecipes(s.data),t.next=25;break;case 23:c=(0,l.j)(10),e.recipes=c.data.recipes;case 25:e.updateDisplayedRecipes(),t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](0),console.error("Error fetching recipes:",t.t0);case 31:case"end":return t.stop()}}),t,null,[[0,28]])})))()},updateDisplayedRecipes:function(){var e=this.currentPage*this.pageSize,t=e+this.pageSize;this.displayedRecipes=this.recipes.slice(e,t)},nextPage:function(){this.hasNextPage&&(this.currentPage+=1,this.updateDisplayedRecipes())},previousPage:function(){this.hasPreviousPage&&(this.currentPage-=1,this.updateDisplayedRecipes())},refreshRecipes:function(){this.updateRecipesBackEnd()},determineParentPageName:function(){var e=this.$route.name;"main"===e?this.parentPageName="main":"favorites"===e?this.parentPageName="favorites":"private"===e?this.parentPageName="private":"search"===e&&(this.parentPageName="search")},handleFavoriteToggle:function(e){if("favorites"===this.parentPageName){var t=this.recipes.findIndex((function(t){return t.id===e}));if(-1!==t){this.recipes.splice(t,1);var r=this.displayedRecipes.findIndex((function(t){return t.id===e}));-1!==r&&(this.displayedRecipes.splice(r,1),this.fillDisplayedRecipes())}else console.warn("Recipe not found in favorites:",e)}},fillDisplayedRecipes:function(){var e=this.pageSize-this.displayedRecipes.length;if(e>0)for(var t=this.currentPage*this.pageSize,r=t+this.pageSize;r<this.recipes.length&&e>0;r++)this.displayedRecipes.push(this.recipes[r]),s("numberOfNeededRecipes");0===this.displayedRecipes.length&&this.hasPreviousPage&&this.previousPage(),this.updateDisplayedRecipes()}}},p=u;var d=r(1001),f=(0,d.Z)(p,a,n,!1,null,"177f3774",null);const h=f.exports},5535:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});r(1058);var a=function(){var e=this,t=e._self._c;return t("b-card",{staticClass:"custom-card"},[t("h1",{staticClass:"title"},[e._v("Search Page")]),t("div",{staticClass:"mt-3"},[t("h6",{staticClass:"mb-2 font-weight-bold result-header"},[e._v("Amount of results")]),t("b-button-group",e._l(e.results,(function(r){return t("b-button",{key:r,staticClass:"btn-lg result-button",attrs:{variant:r===e.selectedResult?"custom-active":"outline-custom"},on:{click:function(t){return e.selectResult(r)}}},[e._v(" "+e._s(r)+" ")])})),1)],1),t("div",{staticClass:"d-flex justify-content-between align-items-center mt-3"},[t("b-form-input",{staticClass:"w-75 taller-input mr-2",attrs:{placeholder:"Look for a recipe..."},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),t("div",[t("b-button",{staticClass:"btn-lg search-button",on:{click:e.performSearch}},[e._v("Search")]),t("b-button",{staticClass:"ml-2 btn-lg",attrs:{variant:"secondary"},on:{click:e.resetSearch}},[e._v("Reset")])],1)],1),t("div",{staticClass:"row mt-3"},e._l(e.selects,(function(r,a){return t("div",{key:a,staticClass:"col-sm-4"},[t("h6",{staticClass:"mb-2 font-weight-bold"},[e._v(e._s(r.title))]),t("b-form-select",{staticClass:"mt-1",attrs:{options:r.options,size:"sm"},model:{value:r.selected,callback:function(t){e.$set(r,"selected",t)},expression:"select.selected"}})],1)})),0),e.recipes.length>0?t("RecipePreviewList",{attrs:{numberOfRecipes:parseInt(e.selectedResult),recipes:e.recipes}}):e._e()],1)},n=[],s=r(124),i=(r(2526),r(1817),r(1539),r(2165),r(8783),r(3948),r(9753),r(1703),r(6647),r(2780));function c(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=(0,i.Z)(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){o=!0,s=e},f:function(){try{c||null==r["return"]||r["return"]()}finally{if(o)throw s}}}}var o=r(8534),l=r(9584),u=(r(9554),r(4747),r(2222),r(1249),r(3210),r(7658),r(9669)),p=r.n(u),d=r(4266),f=["African","Asian","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],h=[{value:"gluten-free",text:"Gluten Free"},{value:"ketogenic",text:"Ketogenic"},{value:"vegetarian",text:"Vegetarian"},{value:"lacto-vegetarian",text:"Lacto-Vegetarian"},{value:"ovo-vegetarian",text:"Ovo-Vegetarian"},{value:"vegan",text:"Vegan"},{value:"pescetarian",text:"Pescetarian"},{value:"paleo",text:"Paleo"},{value:"primal",text:"Primal"},{value:"low-fodmap",text:"Low FODMAP"},{value:"whole30",text:"Whole30"}],v=["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"];const m={components:{RecipePreviewList:d.Z},data:function(){return{text:"",selectedResult:"5",selects:[{title:"Cuisine",selected:null,options:[]},{title:"Diet",selected:null,options:[]},{title:"Intolerance",selected:null,options:[]}],recipes:[]}},computed:{results:function(){return["5","10","15"]}},mounted:function(){this.selects.forEach((function(e,t){switch(t){case 0:e.options=[{value:null,text:"Please select a cuisine"}].concat((0,l.Z)(f.map((function(e){return{value:e.toLowerCase(),text:e}}))));break;case 1:e.options=[{value:null,text:"Please select a diet"}].concat((0,l.Z)(h.map((function(e){return{value:e.value,text:e.text}}))));break;case 2:e.options=[{value:null,text:"Please select an intolerance"}].concat((0,l.Z)(v.map((function(e){return{value:e.toLowerCase(),text:e}}))));break;default:e.options=[]}}))},methods:{performSearch:function(){var e=this;return(0,o.Z)((0,s.Z)().mark((function t(){var r,a,n,i,o,l,u,d;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.text.trim()){t.next=3;break}return e.searchQueryEmpty=!0,t.abrupt("return");case 3:return e.searchQueryEmpty=!1,t.prev=4,t.next=7,p().get("".concat(e.$root.store.server_domain,"/recipes/search"),{params:{recipeName:e.text,cuisine:e.selects[0].selected?e.selects[0].selected:null,diet:e.selects[1].selected?e.selects[1].selected:null,intolerance:e.selects[2].selected?e.selects[2].selected:null,number:e.selectedResult}});case 7:r=t.sent,a=r.data,n=[],i=c(a),t.prev=11,i.s();case 13:if((o=i.n()).done){t.next=22;break}return l=o.value,u=l.id,t.next=18,p().get("".concat(e.$root.store.server_domain,"/recipes/").concat(u,"/information"));case 18:d=t.sent,n.push(d.data);case 20:t.next=13;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](11),i.e(t.t0);case 27:return t.prev=27,i.f(),t.finish(27);case 30:e.recipes=n,e.searchPerformed=!0,e.noResultsFound=0===n.length,t.next=39;break;case 35:t.prev=35,t.t1=t["catch"](4),console.error("Search failed:",t.t1),e.noResultsFound=!0;case 39:case"end":return t.stop()}}),t,null,[[4,35],[11,24,27,30]])})))()},selectResult:function(e){this.selectedResult=e},resetSearch:function(){this.text="",this.selects.forEach((function(e){e.selected=null})),this.recipes=[],this.searchPerformed=!1,this.noResultsFound=!1}}},g=m;var x=r(1001),b=(0,x.Z)(g,a,n,!1,null,"2912f8f4",null);const P=b.exports},5117:(e,t,r)=>{"use strict";var a=r(6330),n=TypeError;e.exports=function(e,t){if(!delete e[t])throw n("Cannot delete property "+a(t)+" of "+a(e))}},3009:(e,t,r)=>{var a=r(7854),n=r(7293),s=r(1702),i=r(1340),c=r(3111).trim,o=r(1361),l=a.parseInt,u=a.Symbol,p=u&&u.iterator,d=/^[+-]?0x/i,f=s(d.exec),h=8!==l(o+"08")||22!==l(o+"0x16")||p&&!n((function(){l(Object(p))}));e.exports=h?function(e,t){var r=c(i(e));return l(r,t>>>0||(f(d,r)?16:10))}:l},2222:(e,t,r)=>{"use strict";var a=r(2109),n=r(7293),s=r(3157),i=r(111),c=r(7908),o=r(6244),l=r(7207),u=r(6135),p=r(5417),d=r(1194),f=r(5112),h=r(7392),v=f("isConcatSpreadable"),m=h>=51||!n((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),g=function(e){if(!i(e))return!1;var t=e[v];return void 0!==t?!!t:s(e)},x=!m||!d("concat");a({target:"Array",proto:!0,arity:1,forced:x},{concat:function(e){var t,r,a,n,s,i=c(this),d=p(i,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(s=-1===t?i:arguments[t],g(s))for(n=o(s),l(f+n),r=0;r<n;r++,f++)r in s&&u(d,f,s[r]);else l(f+1),u(d,f++,s);return d.length=f,d}})},4553:(e,t,r)=>{"use strict";var a=r(2109),n=r(2092).findIndex,s=r(1223),i="findIndex",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},561:(e,t,r)=>{"use strict";var a=r(2109),n=r(7908),s=r(1400),i=r(9303),c=r(6244),o=r(3658),l=r(7207),u=r(5417),p=r(6135),d=r(5117),f=r(1194),h=f("splice"),v=Math.max,m=Math.min;a({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var r,a,f,h,g,x,b=n(this),P=c(b),y=s(e,P),w=arguments.length;for(0===w?r=a=0:1===w?(r=0,a=P-y):(r=w-2,a=m(v(i(t),0),P-y)),l(P+r-a),f=u(b,a),h=0;h<a;h++)g=y+h,g in b&&p(f,h,b[g]);if(f.length=a,r<a){for(h=y;h<P-a;h++)g=h+a,x=h+r,g in b?b[x]=b[g]:d(b,x);for(h=P;h>P-a+r;h--)d(b,h-1)}else if(r>a)for(h=P-a;h>y;h--)g=h+a-1,x=h+r-1,g in b?b[x]=b[g]:d(b,x);for(h=0;h<r;h++)b[h+y]=arguments[h+2];return o(b,P-a+r),f}})},1058:(e,t,r)=>{var a=r(2109),n=r(3009);a({global:!0,forced:parseInt!=n},{parseInt:n})}}]);
//# sourceMappingURL=585.0c12e5dd.js.map