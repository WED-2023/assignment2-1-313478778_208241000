"use strict";(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[398],{7998:(e,t,r)=>{r.d(t,{Z:()=>d});var s=function(){var e=this,t=e._self._c;return t("b-card",{staticClass:"custom-card"},[t("h1",{staticClass:"title mb-4"},[e._v("Login")]),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.onLogin.apply(null,arguments)}}},[t("b-form-group",{attrs:{id:"input-group-Username","label-cols-sm":"4",label:"Username:","label-for":"username"}},[t("b-form-input",{attrs:{id:"username",type:"text",state:e.validateState("username")},model:{value:e.$v.form.username.$model,callback:function(t){e.$set(e.$v.form.username,"$model",t)},expression:"$v.form.username.$model"}}),t("b-form-invalid-feedback",[e._v(" Username is required ")])],1),t("b-form-group",{attrs:{id:"input-group-Password","label-cols-sm":"4",label:"Password:","label-for":"Password"}},[t("b-form-input",{attrs:{id:"password",type:"password",state:e.validateState("password")},model:{value:e.$v.form.password.$model,callback:function(t){e.$set(e.$v.form.password,"$model",t)},expression:"$v.form.password.$model"}}),t("b-form-invalid-feedback",[e._v(" Password is required ")])],1),t("b-button",{staticClass:"mx-auto w-100",staticStyle:{width:"100px"},attrs:{disabled:e.isSubmitting,type:"submit",variant:"primary"}},[e._v(" Login ")]),t("div",{staticClass:"mt-4"},[e._v(" Do not have an account yet? "),t("span",{staticClass:"register-prompt",on:{click:e.handleToggleForm}},[e._v("Register here ")])])],1),e.form.submitError?t("b-alert",{staticClass:"mt-4",attrs:{variant:"warning",dismissible:"",show:""}},[e._v(" Login failed: "+e._s(e.form.submitError)+" ")]):e._e()],1)},a=[],i=r(124),n=r(8534),o=(r(7658),r(8309),r(1539),r(379));const c={name:"LoginForm",props:{toggleForm:{type:Function}},data:function(){return{form:{username:"",password:"",submitError:void 0},isSubmitting:!1}},validations:{form:{username:{required:o.C1},password:{required:o.C1}}},methods:{validateState:function(e){var t=this.$v.form[e],r=t.$dirty,s=t.$error;return r?!s:null},Login:function(){var e=this;return(0,n.Z)((0,i.Z)().mark((function t(){var r,s,a;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.post("".concat(e.$root.store.server_domain,"/auth/login"),{username:e.form.username,password:e.form.password},{withCredentials:!0});case 3:r=t.sent,r.data.success?(e.$root.store.login(e.form.username),e.$router.push("/")["catch"]((function(e){"NavigationDuplicated"!==e.name&&console.error(e)}))):e.form.submitError=r.data.message||"Login failed",t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.form.submitError=(null===(s=t.t0.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"An error occurred during login. Please try again.";case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},onLogin:function(){var e=this;this.form.submitError=void 0,this.$v.form.$touch(),this.$v.form.$anyError||(this.isSubmitting=!0,this.Login()["finally"]((function(){e.isSubmitting=!1})))},handleToggleForm:function(){var e=this.$route.path;"/"===e?this.toggleForm():"/login"===e&&this.$router.push("/register")}}},l=c;var u=r(1001),p=(0,u.Z)(l,s,a,!1,null,"f2857190",null);const d=p.exports},5923:(e,t,r)=>{r.d(t,{Z:()=>f});var s=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"recipe-preview-container"},[t("b-row",{staticClass:"d-flex align-items-center justify-content-between"},[t("b-col",[t("h3",[e._v(e._s(e.title))])]),t("b-col",{staticClass:"text-right"},["main"===e.parentPageName?t("div",[t("b-iconstack",{staticClass:"rotate-on-hover",attrs:{"font-scale":"2.8"},on:{click:e.refreshRecipes}},[t("b-icon",{attrs:{stacked:"",icon:"circle-fill",variant:"success"}}),t("b-icon",{attrs:{stacked:"",icon:"arrow-repeat",scale:"0.8",variant:"white"}})],1)],1):"favorites"===e.parentPageName||"private"===e.parentPageName?t("div",[t("b-icon",{staticClass:"mr-2",class:e.hasPreviousPage?"rotate-on-hover":"",staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-left-circle-fill",variant:e.hasPreviousPage?"success":"secondary","font-scale":"2.8"},on:{click:e.previousPage}}),t("b-icon",{staticClass:"mr-2",class:e.hasNextPage?"rotate-on-hover":"",staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-right-circle-fill",variant:e.hasNextPage?"success":"secondary","font-scale":"2.8"},on:{click:e.nextPage}})],1):e._e()])],1),e._l(e.displayedRecipes,(function(r){return t("b-row",{key:r.id,staticClass:"mt-4"},[t("RecipePreview",{attrs:{recipe:r},on:{"favorite-toggled":e.handleFavoriteToggle}})],1)}))],2)},a=[];r(1703),r(6647);function i(e){throw new TypeError('"'+e+'" is read-only')}var n=r(124),o=r(8534),c=(r(7042),r(8309),r(4553),r(561),r(7658),r(7733)),l=r(9206);const u={name:"RecipePreviewList",components:{RecipePreview:c.Z},props:{title:{type:String,required:!0}},data:function(){return{recipes:[],displayedRecipes:[],currentPage:0,pageSize:3,parentPageName:""}},computed:{hasPreviousPage:function(){return this.currentPage>0},hasNextPage:function(){var e=this.recipes.length,t=Math.ceil(e/this.pageSize);return this.currentPage<t-1}},mounted:function(){this.determineParentPageName(),this.updateRecipesBackEnd()},methods:{updateRecipesBackEnd:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function t(){var r,s,a,i;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"main"!==e.parentPageName){t.next=9;break}return r=3,t.next=5,e.axios.get("".concat(e.$root.store.server_domain,"/recipes/random"),{params:{number:r}},{withCredentials:!0});case 5:s=t.sent,e.recipes=s.data,t.next=18;break;case 9:if("favorites"!==e.parentPageName){t.next=16;break}return t.next=12,e.axios.get("".concat(e.$root.store.server_domain,"/user/favorites/show"),{withCredentials:!0});case 12:a=t.sent,e.recipes=a.data,t.next=18;break;case 16:i=(0,l.j)(10),e.recipes=i.data.recipes;case 18:e.updateDisplayedRecipes(),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),console.error("Error fetching recipes:",t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},updateDisplayedRecipes:function(){var e=this.currentPage*this.pageSize,t=e+this.pageSize;this.displayedRecipes=this.recipes.slice(e,t)},nextPage:function(){this.hasNextPage&&(this.currentPage+=1,this.updateDisplayedRecipes())},previousPage:function(){this.hasPreviousPage&&(this.currentPage-=1,this.updateDisplayedRecipes())},refreshRecipes:function(){this.updateRecipesBackEnd()},determineParentPageName:function(){var e=this.$route.name;"main"===e?this.parentPageName="main":"favorites"===e?this.parentPageName="favorites":"private"===e&&(this.parentPageName="private")},handleFavoriteToggle:function(e){if("favorites"===this.parentPageName){var t=this.recipes.findIndex((function(t){return t.id===e}));if(-1!==t){this.recipes.splice(t,1);var r=this.displayedRecipes.findIndex((function(t){return t.id===e}));-1!==r&&(this.displayedRecipes.splice(r,1),this.fillDisplayedRecipes())}else console.warn("Recipe not found in favorites:",e)}},fillDisplayedRecipes:function(){var e=this.pageSize-this.displayedRecipes.length;if(e>0)for(var t=this.currentPage*this.pageSize,r=t+this.pageSize;r<this.recipes.length&&e>0;r++)this.displayedRecipes.push(this.recipes[r]),i("numberOfNeededRecipes");0===this.displayedRecipes.length&&this.hasPreviousPage&&this.previousPage(),this.updateDisplayedRecipes()}}},p=u;var d=r(1001),m=(0,d.Z)(p,s,a,!1,null,"ab3678a0",null);const f=m.exports},2638:(e,t,r)=>{r.d(t,{Z:()=>l});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"welcome-user-container"},[t("b-jumbotron",{staticClass:"custom-jumbotron",attrs:{"bg-variant":e.bgVariant,"text-variant":e.textVariant},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",{staticClass:"main-hello"},[e._v(e._s(e.greetingMessage))])]},proxy:!0},{key:"lead",fn:function(){return[e._v(" "+e._s(e.welcomeMessage)+" ")]},proxy:!0}])},[t("p",[e._v(e._s(e.mainText))])])],1)},a=[];const i={name:"WelcomeUser",props:{welcomeMessage:{type:String,default:"Welcome to Recipedia!"},mainText:{type:String,default:"Explore a world of delicious recipes, from quick meals to gourmet dishes, curated by top chefs. Whether you're a beginner or a seasoned cook, you'll find inspiration, tips, and ideas to create unforgettable meals for every occasion."},bgVariant:{type:String,default:""},textVariant:{type:String,default:"dark"}},computed:{greetingMessage:function(){return this.$root.store.username?"Hello ".concat(this.$root.store.username):"Hello Guest"}}},n=i;var o=r(1001),c=(0,o.Z)(n,s,a,!1,null,"a046bd98",null);const l=c.exports},7017:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var s=function(){var e=this,t=e._self._c;return t("b-container",[t("b-row",{staticClass:"text-center"},[t("b-col",{staticClass:"d-flex justify-content-center align-items-center"},[this.$root.store.username?t("b-col",[t("WelcomUser")],1):t("b-col",[e.showLoginForm?t("LoginForm",{attrs:{"toggle-form":e.toggleForm}}):t("RegisterForm",{attrs:{"toggle-form":e.toggleForm}})],1)],1),t("b-col",[t("RecipePreviewList",{attrs:{title:"Explore:"}})],1)],1)],1)},a=[],i=r(7998),n=r(5923),o=r(3656),c=r(2638);const l={components:{LoginForm:i.Z,RegisterForm:o.Z,RecipePreviewList:n.Z,WelcomUser:c.Z},data:function(){return{showLoginForm:!0}},methods:{toggleForm:function(){this.showLoginForm=!this.showLoginForm}}},u=l;var p=r(1001),d=(0,p.Z)(u,s,a,!1,null,"2aea4f3b",null);const m=d.exports},5117:(e,t,r)=>{var s=r(6330),a=TypeError;e.exports=function(e,t){if(!delete e[t])throw a("Cannot delete property "+s(t)+" of "+s(e))}},4553:(e,t,r)=>{var s=r(2109),a=r(2092).findIndex,i=r(1223),n="findIndex",o=!0;n in[]&&Array(1)[n]((function(){o=!1})),s({target:"Array",proto:!0,forced:o},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(n)},561:(e,t,r)=>{var s=r(2109),a=r(7908),i=r(1400),n=r(9303),o=r(6244),c=r(3658),l=r(7207),u=r(5417),p=r(6135),d=r(5117),m=r(1194),f=m("splice"),g=Math.max,h=Math.min;s({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var r,s,m,f,v,b,w=a(this),y=o(w),P=i(e,y),x=arguments.length;for(0===x?r=s=0:1===x?(r=0,s=y-P):(r=x-2,s=h(g(n(t),0),y-P)),l(y+r-s),m=u(w,s),f=0;f<s;f++)v=P+f,v in w&&p(m,f,w[v]);if(m.length=s,r<s){for(f=P;f<y-s;f++)v=f+s,b=f+r,v in w?w[b]=w[v]:d(w,b);for(f=y;f>y-s+r;f--)d(w,f-1)}else if(r>s)for(f=y-s;f>P;f--)v=f+s-1,b=f+r-1,v in w?w[b]=w[v]:d(w,b);for(f=0;f<r;f++)w[f+P]=arguments[f+2];return c(w,y-s+r),m}})}}]);
//# sourceMappingURL=398.36922a8b.js.map